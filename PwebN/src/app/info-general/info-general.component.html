<app-header></app-header>
<app-sidebar></app-sidebar>
<div class="bg-general">
<div class="container content-wrapper mt-4">
    <h2 class="mb-4">Información General</h2>
  
    <!-- Barra de herramientas -->
    <div class="d-flex justify-content-between align-items-center mb-3">
      <div class="d-flex">
        <input type="text" class="form-control me-2" placeholder="Buscar..." [(ngModel)]="searchText">
        <button class="btn btn-primary"><i class="fas fa-search"></i></button>
      </div>
      <button class="btn btn-secondary"><i class="fas fa-file-export"></i> Exportar</button>
    </div>
  
    <!-- Tabla de información general -->
    <div class="table-responsive">
      <table class="table table-striped table-bordered">
        <thead class="table">
          <tr>
            <th>ID</th>
            <th>Apartado</th>
            <th>Descripción</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let doc of filteredDocs">
            <td>{{ doc.doc_type }}</td>
            <td>{{ doc.doc_title }}</td>
            <td>{{ doc.doc_content | slice:0:40 }}...</td>
            <td>
              <button class="btn btn-outline-primary btn-sm me-1" (click)="editDocument(doc)">
                <i class="fas fa-edit"></i>
              </button>
              <button class="btn btn-outline-secondary btn-sm" (click)="viewDocument(doc)">
                <i class="fas fa-eye"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
<!-- Modal para Ver Documento -->
<div class="modal fade" id="documentoModal" tabindex="-1" aria-labelledby="documentoModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="documentoModalLabel">{{ selectedDocument?.doc_title }}</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <!-- Muestra la descripción -->
          <div [innerHTML]="selectedDocument?.doc_content" class="description-content"></div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
        </div>
      </div>
    </div>
  </div>
  <!-- Modal para Editar Documento -->
<div class="modal fade" id="editarDocumentoModal" tabindex="-1" aria-labelledby="editarDocumentoModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="editarDocumentoModalLabel">Editar Documento</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form>
            <!-- Título -->
            <div class="mb-3">
              <label for="tituloDocumento" class="form-label">Título</label>
              <input type="text" class="form-control" id="tituloDocumento" [(ngModel)]="selectedDocument.doc_title" name="tituloDocumento">
            </div>
  
            <!-- Editor de Descripción -->
            <div class="mb-3">
              <label for="editor-container" class="form-label">Descripción</label>
              <div id="editor-container" class="quill-editor-container"></div> 
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
          <button type="button" class="btn btn-primary" (click)="guardarDocumento()">Guardar Cambios</button>
        </div>
      </div>
    </div>
  </div>